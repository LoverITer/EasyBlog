function detectZoom(){let ratio=0,screen=window.screen,ua=navigator.userAgent.toLowerCase();if(window.devicePixelRatio!==undefined){ratio=window.devicePixelRatio}else{if(ua.indexOf("msie")){if(screen.deviceXDPI&&screen.logicalXDPI){ratio=screen.deviceXDPI/screen.logicalXDPI}}else{if(window.outerWidth!==undefined&&window.innerWidth!==undefined){ratio=window.outerWidth/window.innerWidth}}}if(ratio){ratio=Math.round(ratio*100)}return ratio}function showPageZoomWarning(){if(detectZoom()!==125&&!sessionStorage.getItem("isReload")){showInfoMessage("您当前的页面处于缩放，页面可能会错乱，建议缩放比例100%");sessionStorage.setItem("isReload",true)}}jQuery(document).ready(function(){inputList($(".username"),$("#mails"))});function inputList(a,b){let mailBox=["@qq.com","@sina.com","@163.com","@126.com","@yahoo.com.cn","@gmail.com","@sohu.com"];$(a).bind("input propertychange",function(){let key=$(a).val();if(key.indexOf("@")!=-1){key=key.slice(0,key.indexOf("@"))}let mailBoxLen=mailBox.length;let html="";for(let i=0;i<mailBoxLen;i++){html+='<option value="'+key+mailBox[i]+'"></option>'}b.html(html)})}function autoFillUserAccountByCookie(b,a){let str=getCookie("USER-COOKIE");let account=str.split("-");$(b).val(account[0]);$(a).val(AES_ECB_decrypt(account[1],"1a2b3c4d5e6f7g8h"))}function getCookie(a){let name=a+"=";let ca=document.cookie.split(";");for(let i=0;i<ca.length;i++){let c=ca[i];while(c.charAt(0)==" "){c=c.substring(1)}if(c.indexOf(name)!=-1){return c.substring(name.length,c.length)}}return""}function AES_ECB_decrypt(b,a){let key=CryptoJS.enc.Utf8.parse(a);let decryptedData=CryptoJS.AES.decrypt(b,key,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7});return CryptoJS.enc.Utf8.stringify(decryptedData).toString()}function showInfoMessage(a){if(a!=""){spop({template:a,autoclose:3000,position:"top-center",style:"info"})}}function showSuccessMessage(a){if(a!=""){spop({template:a,autoclose:3000,position:"top-center",style:"success"})}}function showErrorMessage(a){if(a!=""){spop({template:a,autoclose:3000,position:"top-center",style:"error"})}}function showWarningMessage(a){if(a!=""){spop({template:a,autoclose:3000,position:"top-center",style:"warning"})}}function _loading(a){zeroModal.loading(a)}function _loadingClose(){$(".zeromodal-overlay").remove();$(".zeromodal-loading2").remove()}function _error(a){zeroModal.error(a+"!")}function _success(a){zeroModal.success(a+"!")}function _alert1(a){zeroModal.alert(a+"!")}function _alert2(){zeroModal.alert({content:"操作提示!",contentDetail:"请选择数据后再进行操作",okFn:function(){alert("ok callback")}})}function _confirmBase(a){zeroModal.confirm(a,function(){alert("ok")})}function _confirmWithDetail(b,a){zeroModal.confirm({content:b+"？",contentDetail:a+"。",okFn:function(){},cancelFn:function(){}})}function passwordDisplayToggle(a,b){$(a).click(function(){if($(this).hasClass("password-hide")){$(this).removeClass("password-hide");$(this).addClass("password-show");$(b).attr("type","text");let value=$(b).val();$(b).val(value)}else{$(this).removeClass("password-show");$(this).addClass("password-hide");$(b).attr("type","password")}})}function showModifyButton(a){$(a).hover(function(){$("a.toggle-btn",this).show()},function(){$("a.toggle-btn",this).hide()})}function toggleStatus(){try{let userJSONStr=localStorage.getItem("user");if(userJSONStr!=null&&userJSONStr!=="0"&&userJSONStr!=="undefined"){changeUserLogState2Login()}else{$.ajax({url:"/user/checkUserStatus",method:"GET",sync:true,success:function(b){if(b.success){localStorage.setItem("user",b.message);changeUserLogState2Login()}else{changeUserLogState2LogOut()}},error:function(){changeUserLogState2LogOut()}})}}catch(a){console.log(a)}}function changeUserLogState2Login(){if($("#login-btn").css("display")!=="none"){$("#login-btn").css("cssText","display:none ;margin-left: 1em !important;")}if($("#header-images").css("display")==="none"){$("#header-images").css("cssText","display:block ;margin-left: 1em !important;")}}function changeUserLogState2LogOut(){if($("#header-images").css("display")!=="none"){$("#header-images").css("cssText","display:none ;margin-left: 1em !important;")}if($("#login-btn").css("display")==="none"){$("#login-btn").css("cssText","display:flex ;margin-left: 1em !important;")}}function logOut(){try{$("#logout").click(function(){$.ajax({url:"/user/logout",method:"GET",sync:true,success:function(b){if(b.success){localStorage.removeItem("user");changeUserLogState2LogOut();window.location.reload()}},error:function(){showErrorMessage("服务异常，请重试！")}})})}catch(a){console.log(a)}}function formatDate(d,a){var b=new Date(d);oYear=b.getFullYear();oMonth=b.getMonth()+1;oDay=b.getDate();oHour=b.getHours();oMin=b.getMinutes();oSen=b.getSeconds();if(a){oTime=oYear+"-"+getzf(oMonth)+"-"+getzf(oDay)+" "+getzf(oHour)+":"+getzf(oMin)+":"+getzf(oSen)}else{oTime=oYear+"-"+getzf(oMonth)+"-"+getzf(oDay)}return oTime}function getzf(a){if(parseInt(a)<10){a="0"+a}return a}function scrollTop(){try{$(".scrollTop").click(function(){$("html,body").stop().animate({scrollTop:0},1000)})}catch(a){console.log(a)}}function clickoutSide(a,b,d){document.onclick=function(f){let call=a.has(f.target.id)||a.has(f.target.className);if(call){b()}else{d()}}};