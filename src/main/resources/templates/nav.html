<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>
<!--公共的头部导航栏-->
<nav th:fragment="navbar" class="ui inverted attached segment m-padded-tb-mini m-shadow-small">
    <!--用户信息-->
    <div class="ui m-container-large">
        <div class="ui inverted secondary stackable menu">
            <h2 class="ui teal header item">EasyBlog</h2>
            <!--搜索框--->
            <div class="right m-item item m-mobile-hide">
                <form name="search" th:action="@{/search/details}" target="_blank" method="get" >
                    <div class="ui icon inverted search input m-margin-tb-tiny">
                        <input th:if="${query==null}" name="query" class="prompt" type="text" placeholder="Search....">
                        <input th:if="${query!=null}" id="query" th:value="${query}" name="query" class="prompt" type="text" placeholder="Search....">
                        <i onclick="document.forms['search'].submit()" class="search link icon"></i>
                    </div>
                </form>
            </div>

            <div class="right m-item m-mobile-hide menu " style="margin: 1.7em 0 auto 2em !important;">
                <i class="teal paint brush icon"></i>
                <a href="#"  th:unless="${session.user!=null}" th:href="@{/manage/blog/post}"
                   style="color :rgb(0,183,173);font-size: 17px">写博客</a>
                <a href="#"  th:unless="${session.user==null}"
                   th:href="@{/manage/blog/post(userId=${#session.getAttribute('user').getUserId()})}"
                   style="color :rgb(0,183,173);font-size: 17px">写博客</a>
            </div>

            <!--我的头像-->
            <div   th:if="${session.user!=null}" id="header-images" th:hidden="hidden" class="right m-item m-mobile-hide menu" style="margin-left: 1em !important;">
                <div class="ui dropdown  item ">
                    <div class="text">
                        <img class="ui medium circular image image-42x42" style="max-height: none !important;" th:src="@{${#session.getAttribute('user').getUserHeaderImgUrl()}}"/>
                    </div>
                    <div class="menu">
                        <a href="#" th:href="@{/manage/uc/follow-list}" class="item"><i
                                class="bookmark icon"></i>我的关注</a>
                        <a href="#" th:href="@{/manage/uc/profile}" class="item"><i class="user icon"></i>个人中心</a>
                        <a href="#" th:href="@{/manage/account/reset/password}" class="item"><i class="cogs icon"></i>账号设置</a>
                        <div class="divider"></div>
                        <a href="#" th:href="@{/article/index/{uid}(uid=${#session.getAttribute('user').getUserId()})}"
                           class="item"><i class="archive icon"></i>我的博客</a>
                        <a href="#" th:href="@{/manage/blog/}" class="item"><i class="edit icon"></i>管理博客</a>
                        <div class="divider"></div>
                        <a href="#" th:href="@{/index/help}" class="item"><i class="basic question  circle icon"></i>帮助</a>
                        <a id="logout" class="item"><i class="sign out icon"></i>退出</a>
                    </div>
                </div>
            </div>

            <div  id="login-btn" class="right m-item m-mobile-hide menu" style="margin-left: 1em !important;font-size: 16px !important;">
                <a href="#" target="_blank" th:href="@{/user/loginPage}" style="font-size: inherit" class="m-item item m-mobile-hide">登录/注册</a>
            </div>
        </div>
    </div>
    <a href="#" class="ui menu toggle black icon button m-right-top m-mobile-show">
        <i class="sidebar icon"></i>
    </a>
    <input id="userId" hidden="hidden" th:if="${session.user!=null}" th:value="${#session.getAttribute('user').getUserId()}">
</nav>

</body>
</html>