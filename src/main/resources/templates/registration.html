<!DOCTYPE html>
<html lang="en" class="no-js" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>EasyBlog - 创建EasyBlog账户</title>
    <link rel="shortcut icon" th:href="@{/static/favicon.ico}"/>
    <link rel="bookmark" th:href="@{/static/favicon.ico}"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/static/css/login/reset.css}">
    <link rel="stylesheet" th:href="@{/static/css/login/supersized.css}">
    <link rel="stylesheet" th:href="@{/static/css/login/style.css}">
    <!-- Javascript -->
    <script th:src="@{/static/js/login/jquery-1.8.2.min.js}"></script>
    <script th:src="@{/static/js/login/supersized.3.2.7.min.js}"></script>
    <script th:src="@{/static/js/login/supersized-init.min.js}"></script>
    <script th:src="@{/static/js/message.js}"></script>
    <script th:src="@{/static/js/login/scripts.js}"></script>
    <script th:src="@{/static/js/easyblog.min.js}"></script>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

</head>

<body>

<div id="#registration" class="page-container">
    <h1>加入EasyBlog</h1>
    <form action="#">
        <input type="text" name="username" class="username" placeholder="手机号/邮箱" list="mails">
        <datalist id="mails"></datalist>
        <input type="password" name="password" class="password" placeholder="密码">
        <div>
            <input style="width: 50%" type="text" name="captchaCode" class="captchaCode" placeholder="验证码">
            <button id="code-btn" type="button" style="cursor: pointer;max-width: 35%;display: inline-block;">获取验证码
            </button>
        </div>
        <button id="registration-submit" type="button">立即注册</button>
        <span><span style="float: right">已有账户？<a style="position: relative;top: 0"
                                                 th:href="@{/user/login.html}">立即登录</a></span></span>
        <div class="error"><span>+</span></div>
    </form>
    <div class="connect">
        <p>第三方直接登录</p>
        <p>
            <a th:href="@{/oauth/github/}" title="GitHub登录">
                <svg t="1604497928465" class="icon" viewBox="0 0 1024 1024" version="1.1"
                     xmlns="http://www.w3.org/2000/svg" p-id="4074" width="32" height="32">
                    <path d="M512 73.142857q119.428571 0 220.285714 58.857143T892 291.714286 950.857143 512q0 143.428571-83.714286 258T650.857143 928.571429q-15.428571 2.857143-22.857143-4t-7.428571-17.142858q0-1.714286 0.285714-43.714285t0.285714-76.857143q0-55.428571-29.714286-81.142857 32.571429-3.428571 58.571429-10.285715t53.714286-22.285714 46.285714-38 30.285714-60T792 489.142857q0-68-45.142857-117.714286 21.142857-52-4.571429-116.571428-16-5.142857-46.285714 6.285714t-52.571429 25.142857l-21.714285 13.714286q-53.142857-14.857143-109.714286-14.857143t-109.714286 14.857143q-9.142857-6.285714-24.285714-15.428571T330.285714 262.571429 281.714286 254.857143q-25.714286 64.571429-4.571429 116.571428-45.142857 49.714286-45.142857 117.714286 0 48.571429 11.714286 85.714286t30 60 46 38.285714 53.714285 22.285714 58.571429 10.285715q-22.285714 20.571429-28 58.857143-12 5.714286-25.714286 8.571428t-32.571428 2.857143-37.428572-12.285714T276.571429 728q-10.857143-18.285714-27.714286-29.714286t-28.285714-13.714285l-11.428572-1.714286q-12 0-16.571428 2.571428t-2.857143 6.571429 5.142857 8 7.428571 6.857143l4 2.857143q12.571429 5.714286 24.857143 21.714285t18 29.142858l5.714286 13.142857q7.428571 21.714286 25.142857 35.142857t38.285714 17.142857 39.714286 4 31.714286-2l13.142857-2.285714q0 21.714286 0.285714 50.571428t0.285714 31.142857q0 10.285714-7.428571 17.142858t-22.857143 4q-132.571429-44-216.285714-158.571429T73.142857 512q0-119.428571 58.857143-220.285714T291.714286 132 512 73.142857zM239.428571 703.428571q1.714286-4-4-6.857142-5.714286-1.714286-7.428571 1.142857-1.714286 4 4 6.857143 5.142857 3.428571 7.428571-1.142858z m17.714286 19.428572q4-2.857143-1.142857-9.142857-5.714286-5.142857-9.142857-1.714286-4 2.857143 1.142857 9.142857 5.714286 5.714286 9.142857 1.714286z m17.142857 25.714286q5.142857-4 0-10.857143-4.571429-7.428571-9.714285-3.428572-5.142857 2.857143 0 10.285715t9.714285 4z m24 24q4.571429-4.571429-2.285714-10.857143-6.857143-6.857143-11.428571-1.714286-5.142857 4.571429 2.285714 10.857143 6.857143 6.857143 11.428571 1.714286z m32.571429 14.285714q1.714286-6.285714-7.428572-9.142857-8.571429-2.285714-10.857142 4t7.428571 8.571428q8.571429 3.428571 10.857143-3.428571z m36 2.857143q0-7.428571-9.714286-6.285715-9.142857 0-9.142857 6.285715 0 7.428571 9.714286 6.285714 9.142857 0 9.142857-6.285714z m33.142857-5.714286q-1.142857-6.285714-10.285714-5.142857-9.142857 1.714286-8 8.571428t10.285714 4.571429 8-8z"
                          fill="#ffffff" p-id="4075"></path>
                </svg>
            </a>
            <a href="javascript:void(0)" title="开发中，敬请期待！">
                <svg t="1604498602008" class="icon" viewBox="0 0 1024 1024" version="1.1"
                     xmlns="http://www.w3.org/2000/svg" p-id="13781" width="28" height="28">
                    <path d="M14.643004 649.232241V353.999376c0-21.238095-0.466771-43.036316 3.780848-63.620932 4.947776-23.805338 14.65662-46.677133 22.731763-70.0157a133.356569 133.356569 0 0 1 11.342544-26.185871c13.302983-21.751544 26.465934-43.736473 42.009419-64.087704a364.081636 364.081636 0 0 1 43.736474-47.984092 167.757615 167.757615 0 0 1 37.901832-25.532392 797.012044 797.012044 0 0 1 84.81235-39.115437A261.391944 261.391944 0 0 1 351.185132 3.034014c158.935637 0 317.871275-1.727054 476.806912-2.61392 38.882052 0 77.81078-1.073574 116.692832 0.606803 15.123391 0.65348 31.74045-3.174045 45.696913 7.141601 10.689063 7.888435 18.950916 16.336997 18.670853 31.507065-0.606803 50.131241 0 100.355836-0.233385 150.533753 0 14.843328-11.295866 26.465934-25.205652 32.673993-16.663736 7.234956-33.560859 6.441444-50.644689 6.441445h-574.128734c-31.74045 0-57.926322 14.00314-80.09796 35.661329-27.072737 26.232549-38.368603 58.346416-38.088541 96.481634 0.933543 131.442806 0.32674 262.932289 0.32674 394.421773 0 20.724647 5.321193 29.126531 24.878912 35.194558a118.606595 118.606595 0 0 0 33.514181 5.881318c120.567034 0.420094 241.180745 1.493668 361.701103-0.606802 30.013396-0.513448 60.353533-7.468341 85.232444-30.666877a112.025119 112.025119 0 0 0 36.96829-82.105076c0.420094-10.082261 0.32674-20.211199 0-30.29346-0.513448-15.263422-8.63527-24.785558-23.338567-27.212768a152.120776 152.120776 0 0 0-24.272109-2.380534h-259.058087c-9.335427 0-18.39079 0.373417-27.586186 0-20.02449-1.026897-39.535532-23.058504-39.255468-44.10989 0.560126-44.716693 1.120251-89.480064 0-134.196757-0.700157-22.591732 24.73888-48.077447 48.077446-47.610676 77.764103 1.446991 155.574884 0.560126 233.385665 0.560126 92.560754 0 185.168186 0.466771 277.72894-0.560126 14.283203 0 21.844898 6.301413 30.293459 14.890006s9.988906 17.924019 9.94223 29.219885c-0.32674 79.724543 0 159.449086-0.373417 239.173629a263.492415 263.492415 0 0 1-4.667714 50.691366c-3.967556 19.464364-8.075144 39.675563-16.803767 57.272842-12.976243 26.185872-25.39236 52.698483-42.382837 77.203978a510.227739 510.227739 0 0 1-61.193721 71.322659c-14.00314 14.00314-33.000733 23.571952-50.551335 33.70089a407.864787 407.864787 0 0 1-61.567138 31.600418 318.011306 318.011306 0 0 1-65.347986 15.076714c-78.557615 11.155835-157.628678 3.220722-236.513033 4.667714s-157.90874 0.32674-236.839772 0.32674c-58.346416 0-116.692832-0.32674-175.039248 0-17.877342 0-42.756254-20.911356-42.522868-41.122554 1.30696-110.858191 0.606803-221.669704 0.606803-332.527895z"
                          fill="#FFFFFF" p-id="13782"></path>
                </svg>
            </a>
            <a href="javascript:void(0)" title="开发中，敬请期待！">
                <svg t="1604498167251" class="icon" viewBox="0 0 1237 1024" version="1.1"
                     xmlns="http://www.w3.org/2000/svg" p-id="6899" width="32" height="32">
                    <path d="M826.325333 319.658667c13.44 0 26.752 0.981333 39.978667 2.432-35.925333-167.296-214.826667-291.626667-418.986667-291.626667C218.965333 30.464 32 186.069333 32 383.658667c0 114.048 62.208 207.701333 166.186667 280.32L156.586667 788.906667l145.194666-72.789334c51.925333 10.282667 93.610667 20.864 145.493334 20.864 13.013333 0 25.941333-0.64 38.741333-1.664-8.106667-27.733333-12.8-56.832-12.8-86.997333 0-181.418667 155.776-328.661333 353.066667-328.661333z m-223.317333-112.64c31.274667 0 52.010667 20.608 52.010667 51.84 0 31.146667-20.736 52.010667-52.010667 52.010666-31.146667 0-62.336-20.864-62.336-52.010666 0-31.232 31.232-51.797333 62.336-51.797334zM312.362667 310.912c-31.146667 0-62.506667-20.864-62.506667-52.010667 0-31.232 31.402667-51.797333 62.506667-51.797333 31.146667 0 51.84 20.565333 51.84 51.797333 0 31.146667-20.693333 52.010667-51.84 52.010667z m892.970666 332.458667c0-166.016-166.144-301.354667-352.725333-301.354667-197.589333 0-353.237333 135.338667-353.237333 301.354667 0 166.314667 155.648 301.354667 353.237333 301.354666 41.344 0 83.072-10.410667 124.586667-20.821333l113.92 62.378667-31.232-103.808c83.328-62.549333 145.450667-145.493333 145.450666-239.104zM738.090667 591.36c-20.693333 0-41.557333-20.565333-41.557334-41.557333 0-20.693333 20.864-41.514667 41.557334-41.514667 31.402667 0 51.968 20.821333 51.968 41.514667 0 20.992-20.565333 41.557333-51.968 41.557333z m228.394666 0c-20.48 0-41.216-20.565333-41.216-41.557333 0-20.693333 20.693333-41.514667 41.216-41.514667 31.146667 0 52.010667 20.821333 52.010667 41.514667 0 20.992-20.906667 41.557333-52.010667 41.557333z"
                          fill="#FFFFFF" p-id="6900"></path>
                </svg>
            </a>
            <a href="javascript:void(0)" title="开发中，敬请期待！">
                <svg t="1604498234027" class="icon" viewBox="0 0 1024 1024" version="1.1"
                     xmlns="http://www.w3.org/2000/svg" p-id="9086" width="32" height="32">
                    <path d="M116.435 593.714c-33.54 78.964-38.985 154.297-12.059 168.37 18.572 9.696 47.686-12.382 74.936-52.909 10.791 44.157 37.493 84.137 75.633 116.21-40.004 14.768-66.135 38.886-66.135 66.232 0 44.954 70.709 81.302 157.978 81.302 78.716 0 143.907-29.538 155.94-68.371 3.232-0.049 15.663-0.049 18.796 0 12.083 38.784 77.324 68.371 155.989 68.371 87.267 0 157.978-36.398 157.978-81.302 0-27.297-26.105-51.464-66.135-66.232 38.089-32.123 64.889-72.053 75.631-116.21 27.251 40.527 56.29 62.605 74.887 52.909 26.95-14.073 21.631-89.456-12.032-168.37-26.355-62.058-62.11-107.754-89.457-117.848 0.398-3.929 0.596-7.958 0.596-11.935 0-23.968-6.661-46.146-18.049-64.196 0.199-1.393 0.199-2.834 0.199-4.227 0-11.038-2.636-21.381-7.114-30.332-6.909-161.309-111.93-289.402-281.866-289.402-170.036 0-275.106 128.093-281.943 289.402-4.525 9.001-7.135 19.343-7.135 30.332 0 1.393 0.099 2.835 0.15 4.227-11.288 18.05-17.951 40.178-17.951 64.196 0 3.978 0.15 7.955 0.498 11.935-27.151 10.094-63.028 55.841-89.333 117.848z"
                          fill="#ffffff" p-id="9087"></path>
                </svg>
            </a>
        </p>
    </div>
</div>

</body>
<script type="text/javascript">

    //倒计时的时间
    let maxtime = 60;
    let timeOut;

    $(function () {
        $('#code-btn').click(function () {
            let username = $('.username').val();
            let mail_reg = /^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/;
            let phone_reg = /^(((13[0-9]{1})|(14[0-9]{1})|(17[0-9]{1})|(15[0-3]{1})|(15[4-9]{1})|(18[0-9]{1})|(199))+\d{8})$/;
            if (username == '') {
                toast("请输入账号");
                $('form .username').focus();
                return false;
            }
            if (phone_reg.test(username)) {
                //判断是手机，就通过ajax异步请求给用户的这个手机发送验证码
                $.ajax({
                    url: "/user/phoneCaptchaCode",
                    type: "GET",
                    async: false,
                    data: {phone: username, option: "register"},
                    dataType: "json",
                    success: function (response) {
                        let msg = response.message;
                        toast(msg);
                        timeOut = setInterval('countDown()', 1000);      //倒计时，并设置按钮不可用
                    },
                    error: function () {
                        toast("服务异常，请尝试重新输入手机号！");
                    }
                })
            } else if (mail_reg.test(username)) {
                //判断是邮箱，就通过ajax异步请求给用户的这个邮箱发送验证码
                $.ajax({
                    url: "/user/mailCaptchaCode",
                    type: "GET",
                    async: false,
                    data: {email: username, option: "register"},
                    dataType: "json",
                    success: function (response) {
                        let msg = response.message;
                        toast(msg);
                        timeOut = setInterval('countDown()', 1000);   //倒计时，并设置按钮不可用
                    },
                    error: function () {
                        toast("服务异常，请重试！");
                    }
                })
            } else {
                toast('请输入正确的手机号或邮箱地址');
            }
        });
    });
</script>
</html>

